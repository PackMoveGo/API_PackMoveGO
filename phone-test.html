<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone API Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 10px 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            margin: 15px 0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .ip-box {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Phone API Connection Test</h1>
        
        <div class="ip-box">
            <strong>Your Computer's IP Addresses:</strong><br>
            <code>100.69.38.2:4000</code> (Primary)<br>
            <code>10.1.12.50:4000</code> (Secondary)
        </div>

        <h2>üîç Test Connection</h2>
        <p>Click these buttons to test if your phone can reach your computer:</p>
        
        <button class="test-button" onclick="testAPI('100.69.38.2')">Test 100.69.38.2:4000</button>
        <button class="test-button" onclick="testAPI('10.1.12.50')">Test 10.1.12.50:4000</button>
        <button class="test-button" onclick="testProduction()">Test Production API</button>
        
        <div id="results"></div>

        <h2>üì± Direct URLs to Try</h2>
        <div class="result info">
            <strong>Copy and paste these URLs in your phone's browser:</strong>

            <strong>Primary IP:</strong>
            ‚Ä¢ http://100.69.38.2:4000/health
            ‚Ä¢ http://100.69.38.2:4000/mobile-test
            ‚Ä¢ http://100.69.38.2:4000/v0/blog

            <strong>Secondary IP:</strong>
            ‚Ä¢ http://10.1.12.50:4000/health
            ‚Ä¢ http://10.1.12.50:4000/mobile-test
            ‚Ä¢ http://10.1.12.50:4000/v0/blog

            <strong>Production (Always Works):</strong>
            ‚Ä¢ https://api.packmovego.com/mobile/health
            ‚Ä¢ https://api.packmovego.com/mobile/v0/blog
        </div>

        <h2>üîß If Tests Fail</h2>
        <div class="result info">
            1. Make sure your phone and computer are on the same WiFi
            2. Turn off mobile data on your phone
            3. Try using your phone's mobile hotspot
            4. Check if your WiFi router blocks device-to-device communication
        </div>
    </div>

    <script>
        async function testAPI(ip) {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result';
            resultDiv.innerHTML = `Testing ${ip}:4000...`;
            resultsDiv.appendChild(resultDiv);

            try {
                const response = await fetch(`http://${ip}:4000/health`, {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `
‚úÖ SUCCESS: ${ip}:4000
Status: ${response.status}
Message: ${data.message}
Timestamp: ${data.timestamp}
IP: ${data.ip}
                    `;
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.innerHTML = `
‚ùå FAILED: ${ip}:4000
Status: ${response.status}
Error: HTTP ${response.status}
                    `;
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
‚ùå ERROR: ${ip}:4000
Error: ${error.message}
This means your phone cannot reach your computer
                    `;
            }
        }

        async function testProduction() {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result';
            resultDiv.innerHTML = `Testing production API...`;
            resultsDiv.appendChild(resultDiv);

            try {
                const response = await fetch('https://api.packmovego.com/mobile/health', {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `
‚úÖ SUCCESS: Production API
Status: ${response.status}
Message: ${data.message}
Timestamp: ${data.timestamp}
                    `;
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.innerHTML = `
‚ùå FAILED: Production API
Status: ${response.status}
                    `;
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
‚ùå ERROR: Production API
Error: ${error.message}
                    `;
            }
        }
    </script>
</body>
</html> 